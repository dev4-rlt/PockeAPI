<form [formGroup]="pokemonForm" (ngSubmit)="createPokemon()" class="w-full bg-slate-400 rounded-lg p-12 space-y-10">

    <h2 class="text-center">Creación de Pokemon</h2>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
        @for(field of this.fields; track field.id) {
        <div>
            <label [for]="field.id">
                {{field.name}}
                @if (field.required) {
                <span class="text-red-600">*</span>
                }
            </label>
            <input class="form-control" [id]="field.id" type="text" [formControlName]="field.id">
        </div>
        }
        <p><label class="text-red-600">*</label>Campos obligatorios</p>
    </div>

    <!-- <div>
        <label>
            Prueba
            <span class="text-red-600">*</span>
        </label>
        <input class="form-control bg-slate-400" type="text">
    </div> -->

    <div class="w-full">
        <div class="space-y-2">
            <div class="grid grid-cols-3">
                <p>Agregar habilidades</p>
                <button type="button" (click)="showAbilityForm()"
                    class="bg-green-800 w-12 rounded-lg px-4 py-2 text-2xl text-white font-bold">+</button>
                <div class="flex flex-row space-x-1">
                    @for(ability of this.pokemonForm.value.pokemonHabilitities; track ability) {
                    <div class="bg-slate-600 text-white h-6 px-2 rounded-md">{{ability.name}}</div>
                    }
                </div>
            </div>
            <div class="grid grid-cols-3">
                <p>Agregar movimientos</p>
                <button type="button" (click)="showMoveForm()"
                    class="bg-green-800 w-12 rounded-lg px-4 py-2 text-2xl text-white font-bold">+</button>
                <div class="flex flex-row space-x-1">
                    @for(move of this.pokemonForm.value.pokemonMoves; track move) {
                    <div class="bg-slate-600 text-white h-6 px-2 rounded-md">{{move.name}}</div>
                    }
                </div>
            </div>

            <div class="grid grid-cols-3">
                <p>Agregar locaciones</p>
                <button type="button" (click)="showLocationForm()"
                    class="bg-green-800 w-12 rounded-lg px-4 py-2 text-2xl text-white font-bold">+</button>
                <div class="flex flex-row space-x-1">
                    @for(location of this.pokemonForm.value.pokemonLocations; track location) {
                    <div class="bg-slate-600 text-white h-6 px-2 rounded-md">{{location.name}}</div>
                    }
                </div>
            </div>

            <div class="grid grid-cols-3">
                <p>Agregar juegos</p>
                <button type="button" (click)="showGameForm()"
                    class="bg-green-800 w-12 rounded-lg px-4 py-2 text-2xl text-white font-bold">+</button>
                <div class="flex flex-row space-x-1">
                    @for(game of this.pokemonForm.value.pokemonGames; track game) {
                    <div class="bg-slate-600 text-white h-6 px-2 rounded-md">{{game.name}}</div>
                    }
                </div>
            </div>
        </div>

        <br /><br /><br />
        <div class="flex justify-center">
            <button type="submit" class="btn btn-s"
                [disabled]="this.pokemonForm.invalid">
                Guardar Pokemon
            </button>
        </div>

        <!-- <div class="flex justify-center mt-4 ng-invalid">
            <button type="button" class="btn btn-p" (click)="logForm()">
                log form
            </button>
        </div> -->
    </div>

</form>



<!-- Ability modal -->
<div [ngClass]="abilityModalDisplay"
    class="fixed bg-black/70 top-0 right-0 left-0 justify-center items-center w-full h-screen">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-slate-400">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-xl font-bold">
                    Agregar habilidad al pokemon
                </h3>
                <button type="button" (click)="hideAbilityForm()"
                    class=" bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <!-- Body -->
            <div class="p-4 md:p-5 space-y-4">
                <app-ability-form (ability)="saveAbility($event)"></app-ability-form>
            </div>
        </div>
    </div>
</div>

<!-- Move modal -->
<div [ngClass]="moveModalDisplay"
    class="fixed bg-black/70 top-0 right-0 left-0 justify-center items-center w-full h-screen">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-slate-400">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-xl font-bold">
                    Agregar movimiento al pokemon
                </h3>
                <button type="button" (click)="hideMoveForm()"
                    class=" bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <!-- Body -->
            <div class="p-4 md:p-5 space-y-4">
                <app-move-form (move)="saveMove($event)"></app-move-form>
            </div>
        </div>
    </div>
</div>

<!-- Location modal -->
<div [ngClass]="locationModalDisplay"
    class="fixed bg-black/70 top-0 right-0 left-0 justify-center items-center w-full h-screen">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-slate-400">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-xl font-bold">
                    Agregar locación al pokemon
                </h3>
                <button type="button" (click)="hideLocationForm()"
                    class=" bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <!-- Body -->
            <div class="p-4 md:p-5 space-y-4">
                <app-location-form (location)="saveLocation($event)"></app-location-form>
            </div>
        </div>
    </div>
</div>

<!-- Game modal -->
<div [ngClass]="gameModalDisplay"
    class="fixed bg-black/70 top-0 right-0 left-0 justify-center items-center w-full h-screen">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-slate-400">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-xl font-bold">
                    Agregar juego al pokemon
                </h3>
                <button type="button" (click)="hideGameForm()"
                    class=" bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <!-- Body -->
            <div class="p-4 md:p-5 space-y-4">
                <app-game-form (game)="saveGame($event)"></app-game-form>
            </div>
        </div>
    </div>
</div>